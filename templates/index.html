<script>
    function checkFiles() {
        let assFile = document.getElementById("ass_file").files.length > 0;
        let mp4File = document.getElementById("mp4_file").files.length > 0;

        // ✅ Only show status when both files are selected
        if (assFile && mp4File) {
            document.getElementById("progress").innerHTML = "⏳ Upload in progress...";
        } else {
            document.getElementById("progress").innerHTML = "";  // Hide default message
        }
    }

    function uploadFiles(event) {
        event.preventDefault(); // Prevent premature submission
        
        let formData = new FormData(document.getElementById("uploadForm"));
        let xhr = new XMLHttpRequest();

        xhr.open("POST", "/", true);

        xhr.upload.onprogress = function(event) {
            if (event.lengthComputable) {
                let percent = (event.loaded / event.total) * 100;
                document.getElementById("progress").innerHTML = `Uploading... ${percent.toFixed(2)}%`;
            }
        };

        xhr.onload = function() {
            if (xhr.status === 200) {
                document.getElementById("progress").innerHTML = "✅ Upload Complete!";
                document.getElementById("submitBtn").disabled = false; // Enable button
            } else {
                document.getElementById("progress").innerHTML = "❌ Upload failed!";
            }
        };

        xhr.send(formData);
    }
</script>
